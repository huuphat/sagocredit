<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K·∫ø Ho·∫°ch Chinh Ph·ª•c Th√°i Lan: Bangkok & Ayutthaya</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: ·ª®ng d·ª•ng ƒë∆∞·ª£c c·∫•u tr√∫c theo d·∫°ng trang ƒë∆°n (SPA) v·ªõi c√°c tab ƒëi·ªÅu h∆∞·ªõng, bao g·ªìm m·ªôt t√≠nh nƒÉng m·ªõi "Chuy·∫øn ƒêi T√πy Ch·ªânh". Tab n√†y cho ph√©p ng∆∞·ªùi d√πng nh·∫≠p s·ªü th√≠ch, s·ªë ng√†y, v√† ng√¢n s√°ch ƒë·ªÉ AI t·∫°o ra m·ªôt l·ªãch tr√¨nh ho√†n to√†n m·ªõi. C·∫•u tr√∫c n√†y bi·∫øn ·ª©ng d·ª•ng t·ª´ m·ªôt k·∫ø ho·∫°ch tƒ©nh th√†nh m·ªôt c√¥ng c·ª• l·∫≠p k·∫ø ho·∫°ch ƒë·ªông v√† t∆∞∆°ng t√°c. -->
    <!-- Visualization & Content Choices: T√≠nh nƒÉng "Chuy·∫øn ƒêi T√πy Ch·ªânh" s·ª≠ d·ª•ng m·ªôt form nh·∫≠p li·ªáu ƒë∆°n gi·∫£n. Khi ng∆∞·ªùi d√πng g·ª≠i y√™u c·∫ßu, m·ªôt prompt chi ti·∫øt ƒë∆∞·ª£c t·∫°o ra v√† g·ª≠i ƒë·∫øn Gemini API, y√™u c·∫ßu m·ªôt ph·∫£n h·ªìi d·∫°ng JSON c√≥ c·∫•u tr√∫c. Ph·∫£n h·ªìi n√†y sau ƒë√≥ ƒë∆∞·ª£c ph√¢n t√≠ch v√† hi·ªÉn th·ªã ƒë·ªông d∆∞·ªõi d·∫°ng m·ªôt l·ªãch tr√¨nh chi ti·∫øt, t∆∞∆°ng t·ª± nh∆∞ tab L·ªãch tr√¨nh c√≥ s·∫µn. Vi·ªác n√†y th·ªÉ hi·ªán m·ªôt c√°ch s·ª≠ d·ª•ng API n√¢ng cao, t·∫≠p trung v√†o vi·ªác t·∫°o n·ªôi dung c√≥ c·∫•u tr√∫c thay v√¨ ch·ªâ tr·∫£ l·ªùi c√¢u h·ªèi. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #FDFBF8;
        }
        .active-tab {
            border-bottom-color: #C08261;
            color: #C08261;
            font-weight: 700;
        }
        .tab-content {
            display: none;
        }
        .active-content {
            display: block;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 1.25rem;
            top: 1.25rem;
            bottom: -1.25rem;
            width: 2px;
            background-color: #E4C59E;
            transform: translateX(-50%);
        }
         .timeline-item:last-child::before {
            display: none;
        }
        .icon-bg {
            background-color: #9A8B7A;
        }
        .details-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .details-content.open {
            max-height: 1500px;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: auto;
            max-height: 400px;
        }
        .gemini-response {
            white-space: pre-wrap;
            line-height: 1.7;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #C08261;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-[#9A8B7A]">K·∫ø Ho·∫°ch Chinh Ph·ª•c Th√°i Lan</h1>
            <p class="text-lg text-gray-600 mt-2">C√¥ng c·ª• l·∫≠p k·∫ø ho·∫°ch du l·ªãch th√¥ng minh</p>
        </header>

        <nav class="flex flex-wrap justify-center border-b-2 border-gray-200 mb-8">
            <button class="tab-button text-lg py-4 px-6 border-b-4 border-transparent transition-all duration-300 active-tab" onclick="showTab('overview')">T·ªïng Quan</button>
            <button class="tab-button text-lg py-4 px-6 border-b-4 border-transparent transition-all duration-300" onclick="showTab('itinerary')">L·ªãch Tr√¨nh M·∫´u</button>
            <button class="tab-button text-lg py-4 px-6 border-b-4 border-transparent transition-all duration-300" onclick="showTab('budget')">Kinh Ph√≠</button>
            <button class="tab-button text-lg py-4 px-6 border-b-4 border-transparent transition-all duration-300" onclick="showTab('custom')">Chuy·∫øn ƒêi T√πy Ch·ªânh</button>
            <button class="tab-button text-lg py-4 px-6 border-b-4 border-transparent transition-all duration-300" onclick="showTab('ai')">Tr·ª£ L√Ω AI</button>
        </nav>

        <main>
            <section id="overview" class="tab-content active-content">
                 <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl font-bold text-[#C08261] mb-6 border-l-4 border-[#C08261] pl-4">Th√¥ng tin chuy·∫øn ƒëi m·∫´u</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div><h3 class="font-bold text-gray-700">üóìÔ∏è Th·ªùi gian</h3><p>26/09/2025 - 01/10/2025 (6 ng√†y 5 ƒë√™m)</p></div>
                            <div><h3 class="font-bold text-gray-700">üë• S·ªë l∆∞·ª£ng</h3><p>4-5 ng∆∞·ªùi</p></div>
                            <div><h3 class="font-bold text-gray-700">üé® S·∫Øc th√°i chuy·∫øn ƒëi</h3><div class="flex flex-wrap gap-2 mt-1"><span class="bg-green-100 text-green-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded-full">Thi√™n nhi√™n</span><span class="bg-blue-100 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded-full">Th∆∞ gi√£n</span><span class="bg-yellow-100 text-yellow-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded-full">Th√†nh ph·ªë</span><span class="bg-purple-100 text-purple-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded-full">VƒÉn h√≥a</span></div></div>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-700 mb-2">‚úàÔ∏è Chuy·∫øn bay ƒë·ªÅ xu·∫•t (chi·ªÅu ƒëi)</h3>
                            <div class="border border-gray-200 rounded-lg p-4 bg-gray-50"><p class="font-semibold">Vietjet Air / Thai AirAsia</p><p><strong>H√†nh tr√¨nh:</strong> SGN (TP.HCM) ‚Üí DMK (Don Mueang, Bangkok)</p><p><strong>Gi√° v√© tham kh·∫£o:</strong> ~1.450.000 VND / ng∆∞·ªùi (ch∆∞a g·ªìm h√†nh l√Ω k√Ω g·ª≠i)</p><p class="text-sm text-gray-500 mt-1">L∆∞u √Ω: Gi√° v√© ƒë√£ ƒë∆∞·ª£c ki·ªÉm tra v√† ƒë√°p ·ª©ng ti√™u ch√≠ d∆∞·ªõi 2 tri·ªáu. N√™n ƒë·∫∑t s·ªõm ƒë·ªÉ c√≥ gi√° t·ªët nh·∫•t.</p></div>
                        </div>
                        <div class="md:col-span-2">
                             <h3 class="font-bold text-gray-700 mb-2">üè® N∆°i ·ªü & üöÜ Di chuy·ªÉn</h3>
                             <p><strong>N∆°i ·ªü:</strong> ∆Øu ti√™n c√°c hostel ho·∫∑c guesthouse s·∫°ch s·∫Ω, c√≥ ph√≤ng ri√™ng cho nh√≥m. Khu v·ª±c ƒë·ªÅ xu·∫•t: Sukhumvit (g·∫ßn t√†u BTS) ho·∫∑c g·∫ßn ga t√†u Hua Lamphong ƒë·ªÉ ti·ªán di chuy·ªÉn. ƒê·∫∑t ph√≤ng qua Agoda/Booking.com.</p>
                             <p><strong>Di chuy·ªÉn ch√≠nh:</strong> T√†u ƒëi·ªán (BTS/MRT) ·ªü Bangkok v√† t√†u h·ªèa gi·ªØa c√°c th√†nh ph·ªë l√† ph∆∞∆°ng √°n ch√≠nh, ti·∫øt ki·ªám v√† hi·ªáu qu·∫£.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="itinerary" class="tab-content">
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8"><h2 class="text-2xl font-bold text-[#C08261] mb-6 border-l-4 border-[#C08261] pl-4">H√†nh tr√¨nh kh√°m ph√° (M·∫´u)</h2><p class="mb-8 text-gray-600">ƒê√¢y l√† l·ªãch tr√¨nh g·ª£i √Ω, b·∫°n c√≥ th·ªÉ linh ho·∫°t ƒëi·ªÅu ch·ªânh. Nh·∫•p v√†o m·ªói ng√†y ƒë·ªÉ xem chi ti·∫øt.</p><div class="relative space-y-8"><div class="timeline-item pl-12 relative cursor-pointer" onclick="toggleDetails('day1')"><div class="icon-bg absolute left-0 top-0 w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg transform -translate-x-1/2">1</div><h3 class="text-xl font-bold">Ng√†y 1: Bangkok S√¥i ƒê·ªông</h3><p class="text-gray-500">Nh·∫≠p c·∫£nh, nh·∫≠n ph√≤ng v√† kh√°m ph√° Chinatown</p><div id="day1" class="details-content"><ul class="mt-4 space-y-2 text-gray-700 pl-4 border-l-2 border-gray-200"><li><strong>‚úàÔ∏è S√°ng:</strong> Bay t·ª´ HCM ƒë·∫øn s√¢n bay Don Mueang (DMK). L√†m th·ªß t·ª•c nh·∫≠p c·∫£nh, mua SIM card.</li><li><strong>üöÜ Tr∆∞a:</strong> Di chuy·ªÉn v√†o trung t√¢m b·∫±ng xe bus A1 ƒë·∫øn tr·∫°m BTS Mo Chit, sau ƒë√≥ ƒëi BTS/MRT v·ªÅ kh√°ch s·∫°n.</li><li><strong>üè® Chi·ªÅu:</strong> Nh·∫≠n ph√≤ng, ngh·ªâ ng∆°i.</li><li><strong>üèÆ T·ªëi:</strong> Kh√°m ph√° khu ph·ªë T√†u (Chinatown - Yaowarat), th∆∞·ªüng th·ª©c ·∫©m th·ª±c ƒë∆∞·ªùng ph·ªë ƒë·∫∑c s·∫Øc.</li></ul></div></div><div class="timeline-item pl-12 relative cursor-pointer" onclick="toggleDetails('day2')"><div class="icon-bg absolute left-0 top-0 w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg transform -translate-x-1/2">2</div><h3 class="text-xl font-bold">Ng√†y 2: D·∫•u ·∫§n Ho√†ng Gia & S√¥ng N∆∞·ªõc</h3><p class="text-gray-500">Tham quan cung ƒëi·ªán v√† d·∫°o ch·ª£ ƒë√™m b√™n s√¥ng</p><div id="day2" class="details-content"><ul class="mt-4 space-y-2 text-gray-700 pl-4 border-l-2 border-gray-200"><li><strong>üëë S√°ng:</strong> Tham quan Ho√†ng Cung (Grand Palace) v√† Ch√πa Ph·∫≠t Ng·ªçc (Wat Phra Kaew). (L∆∞u √Ω trang ph·ª•c l·ªãch s·ª±).</li><li><strong>üßò Tr∆∞a:</strong> Gh√© Ch√πa Ph·∫≠t N·∫±m (Wat Pho), tr·∫£i nghi·ªám massage Th√°i c·ªï truy·ªÅn.</li><li><strong>üõ∂ Chi·ªÅu:</strong> ƒêi thuy·ªÅn tr√™n s√¥ng Chao Phraya, ng·∫Øm Ch√πa B√¨nh Minh (Wat Arun) l√∫c ho√†ng h√¥n.</li><li><strong>üé° T·ªëi:</strong> Vui ch∆°i, ƒÉn t·ªëi t·∫°i ch·ª£ ƒë√™m Asiatique The Riverfront.</li></ul></div></div><div class="timeline-item pl-12 relative cursor-pointer" onclick="toggleDetails('day3')"><div class="icon-bg absolute left-0 top-0 w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg transform -translate-x-1/2">3</div><h3 class="text-xl font-bold">Ng√†y 3: V·ªÅ Mi·ªÅn Di S·∫£n Ayutthaya</h3><p class="text-gray-500">Kh√°m ph√° c·ªë ƒë√¥ b·∫±ng t√†u h·ªèa v√† xe ƒë·∫°p</p><div id="day3" class="details-content"><ul class="mt-4 space-y-2 text-gray-700 pl-4 border-l-2 border-gray-200"><li><strong>üöÇ S√°ng:</strong> Ra ga Hua Lamphong, ƒëi t√†u h·ªèa ƒë·∫øn Ayutthaya (kho·∫£ng 1.5 - 2 ti·∫øng, tr·∫£i nghi·ªám th√∫ v·ªã).</li><li><strong>üö≤ Tr∆∞a:</strong> Thu√™ xe ƒë·∫°p ho·∫∑c tuk-tuk ƒë·ªÉ kh√°m ph√° C√¥ng vi√™n L·ªãch s·ª≠ Ayutthaya - di s·∫£n UNESCO. C√°c ƒëi·ªÉm ch√≠nh: Wat Mahathat (ƒë·∫ßu Ph·∫≠t trong r·ªÖ c√¢y), Wat Phra Si Sanphet.</li><li><strong>üåÖ Chi·ªÅu:</strong> Ng·∫Øm ho√†ng h√¥n tr√™n nh·ªØng t√†n t√≠ch c·ªï k√≠nh.</li><li><strong>üçú T·ªëi:</strong> Th∆∞·ªüng th·ª©c ƒë·∫∑c s·∫£n ƒë·ªãa ph∆∞∆°ng tr∆∞·ªõc khi ƒëi t√†u v·ªÅ l·∫°i Bangkok.</li></ul></div></div><div class="timeline-item pl-12 relative cursor-pointer" onclick="toggleDetails('day4')"><div class="icon-bg absolute left-0 top-0 w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg transform -translate-x-1/2">4</div><h3 class="text-xl font-bold">Ng√†y 4: Th∆∞ Gi√£n "L∆∞·ªùi" & Thi√™n Nhi√™n</h3><p class="text-gray-500">T√¨m v·ªÅ "l√° ph·ªïi xanh" c·ªßa Bangkok</p><div id="day4" class="details-content"><ul class="mt-4 space-y-2 text-gray-700 pl-4 border-l-2 border-gray-200"><li><strong>üö¥ S√°ng & Chi·ªÅu:</strong> D√†nh c·∫£ ng√†y ƒë·ªÉ th∆∞ gi√£n t·∫°i Bang Krachao, "l√° ph·ªïi xanh" c·ªßa Bangkok. Thu√™ xe ƒë·∫°p, d·∫°o quanh nh·ªØng con ƒë∆∞·ªùng l√†ng r·ª£p b√≥ng c√¢y, gh√© qu√°n c√† ph√™ ven s√¥ng v√† t·∫≠n h∆∞·ªüng kh√¥ng kh√≠ trong l√†nh.</li><li><strong>üíÜ T·ªëi:</strong> Quay v·ªÅ trung t√¢m, t·ª± do l·ª±a ch·ªçn: massage th∆∞ gi√£n ho·∫∑c kh√°m ph√° m·ªôt khu ch·ª£ ƒë√™m kh√°c.</li></ul></div></div><div class="timeline-item pl-12 relative cursor-pointer" onclick="toggleDetails('day5')"><div class="icon-bg absolute left-0 top-0 w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg transform -translate-x-1/2">5</div><h3 class="text-xl font-bold">Ng√†y 5: Thi√™n ƒê∆∞·ªùng Mua S·∫Øm</h3><p class="text-gray-500">Th·ªèa s·ª©c mua s·∫Øm v√† chu·∫©n b·ªã v·ªÅ</p><div id="day5" class="details-content"><ul class="mt-4 space-y-2 text-gray-700 pl-4 border-l-2 border-gray-200"><li><strong>üõçÔ∏è C·∫£ ng√†y:</strong> Kh√°m ph√° khu Siam v·ªõi chu·ªói trung t√¢m th∆∞∆°ng m·∫°i l·ªõn: Siam Paragon, CentralWorld, MBK Center.</li><li><strong>üé® L·ª±a ch·ªçn kh√°c:</strong> N·∫øu kh√¥ng th√≠ch mua s·∫Øm, c√≥ th·ªÉ tham quan B·∫£o t√†ng Ngh·ªá thu·∫≠t v√† VƒÉn h√≥a Bangkok (BACC).</li><li><strong>üéÅ T·ªëi:</strong> Mua s·∫Øm qu√† l∆∞u ni·ªám t·∫°i ch·ª£ Pratunam ho·∫∑c Big C. S·∫Øp x·∫øp h√†nh l√Ω.</li></ul></div></div><div class="timeline-item pl-12 relative cursor-pointer" onclick="toggleDetails('day6')"><div class="icon-bg absolute left-0 top-0 w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg transform -translate-x-1/2">6</div><h3 class="text-xl font-bold">Ng√†y 6: T·∫°m Bi·ªát Bangkok</h3><p class="text-gray-500">Bay v·ªÅ l·∫°i TP. H·ªì Ch√≠ Minh</p><div id="day6" class="details-content"><ul class="mt-4 space-y-2 text-gray-700 pl-4 border-l-2 border-gray-200"><li><strong>‚òï S√°ng:</strong> ƒÇn s√°ng, u·ªëng c√† ph√™.</li><li><strong>üöï Tr∆∞a:</strong> Di chuy·ªÉn ra s√¢n bay DMK, l√†m th·ªß t·ª•c.</li><li><strong>‚úàÔ∏è Chi·ªÅu:</strong> ƒê√°p chuy·∫øn bay v·ªÅ l·∫°i TP.HCM, k·∫øt th√∫c h√†nh tr√¨nh.</li></ul></div></div></div></div>
            </section>

            <section id="budget" class="tab-content">
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8"><h2 class="text-2xl font-bold text-[#C08261] mb-6 border-l-4 border-[#C08261] pl-4">D·ª± Tr√π Kinh Ph√≠ (∆∞·ªõc t√≠nh / ng∆∞·ªùi)</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center"><div class="chart-container"><canvas id="budgetChart"></canvas></div><div class="space-y-4"><div><h3 class="font-bold text-lg">T·ªïng c·ªông: ~ 9,500,000 VND / ng∆∞·ªùi</h3><p class="text-sm text-gray-500">M·ª©c chi ph√≠ n√†y kh√° tho·∫£i m√°i, c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh t√πy theo nhu c·∫ßu mua s·∫Øm v√† ƒÉn u·ªëng.</p></div><ul class="space-y-2 text-gray-700"><li class="flex items-center"><span class="w-4 h-4 rounded-full bg-[#E4C59E] mr-3"></span><strong>V√© m√°y bay kh·ª© h·ªìi:</strong> ~ 3,000,000 VND</li><li class="flex items-center"><span class="w-4 h-4 rounded-full bg-[#C08261] mr-3"></span><strong>N∆°i ·ªü (5 ƒë√™m):</strong> ~ 1,500,000 VND</li><li class="flex items-center"><span class="w-4 h-4 rounded-full bg-[#9A8B7A] mr-3"></span><strong>ƒÇn u·ªëng:</strong> ~ 2,500,000 VND</li><li class="flex items-center"><span class="w-4 h-4 rounded-full bg-[#756655] mr-3"></span><strong>Di chuy·ªÉn & Tham quan:</strong> ~ 1,500,000 VND</li><li class="flex items-center"><span class="w-4 h-4 rounded-full bg-[#EAE0D5] mr-3"></span><strong>Chi ph√≠ ph√°t sinh:</strong> ~ 1,000,000 VND</li></ul></div></div></div>
            </section>
            
            <section id="custom" class="tab-content">
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl font-bold text-[#C08261] mb-6 border-l-4 border-[#C08261] pl-4">Thi·∫øt K·∫ø Chuy·∫øn ƒêi C·ªßa Ri√™ng B·∫°n</h2>
                    <form id="custom-trip-form" class="space-y-6">
                        <div>
                            <label class="font-bold text-gray-700">1. B·∫°n mu·ªën ƒëi bao nhi√™u ng√†y?</label>
                            <input type="number" id="trip-days" value="5" min="2" max="10" class="mt-2 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C08261] focus:border-transparent transition">
                        </div>
                        <div>
                            <label class="font-bold text-gray-700">2. S·ªü th√≠ch c·ªßa b·∫°n l√† g√¨?</label>
                            <div id="trip-interests" class="mt-2 grid grid-cols-2 md:grid-cols-3 gap-4">
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"><input type="checkbox" value="·∫®m th·ª±c" class="h-4 w-4 text-[#C08261] focus:ring-[#C08261] border-gray-300 rounded mr-3"> ·∫®m th·ª±c</label>
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"><input type="checkbox" value="L·ªãch s·ª≠ & VƒÉn h√≥a" class="h-4 w-4 text-[#C08261] focus:ring-[#C08261] border-gray-300 rounded mr-3"> L·ªãch s·ª≠ & VƒÉn h√≥a</label>
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"><input type="checkbox" value="Mua s·∫Øm" class="h-4 w-4 text-[#C08261] focus:ring-[#C08261] border-gray-300 rounded mr-3"> Mua s·∫Øm</label>
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"><input type="checkbox" value="Thi√™n nhi√™n & Th∆∞ gi√£n" class="h-4 w-4 text-[#C08261] focus:ring-[#C08261] border-gray-300 rounded mr-3"> Thi√™n nhi√™n</label>
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"><input type="checkbox" value="Cu·ªôc s·ªëng v·ªÅ ƒë√™m" class="h-4 w-4 text-[#C08261] focus:ring-[#C08261] border-gray-300 rounded mr-3"> Cu·ªôc s·ªëng v·ªÅ ƒë√™m</label>
                            </div>
                        </div>
                        <div>
                            <label class="font-bold text-gray-700">3. M·ª©c ng√¢n s√°ch c·ªßa b·∫°n?</label>
                            <div id="trip-budget" class="mt-2 flex flex-col sm:flex-row gap-4">
                                <label class="flex-1 flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"><input type="radio" name="budget" value="Ti·∫øt ki·ªám" class="h-4 w-4 text-[#C08261] focus:ring-[#C08261] border-gray-300 mr-3" checked> Ti·∫øt ki·ªám</label>
                                <label class="flex-1 flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"><input type="radio" name="budget" value="C√¢n b·∫±ng" class="h-4 w-4 text-[#C08261] focus:ring-[#C08261] border-gray-300 mr-3"> C√¢n b·∫±ng</label>
                                <label class="flex-1 flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"><input type="radio" name="budget" value="Tho·∫£i m√°i" class="h-4 w-4 text-[#C08261] focus:ring-[#C08261] border-gray-300 mr-3"> Tho·∫£i m√°i</label>
                            </div>
                        </div>
                        <button type="submit" class="w-full bg-[#9A8B7A] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#756655] transition-colors duration-300">T·∫°o L·ªãch Tr√¨nh Ngay</button>
                    </form>
                    <div id="custom-trip-result" class="mt-8"></div>
                </div>
            </section>

            <section id="ai" class="tab-content">
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8"><h2 class="text-2xl font-bold text-[#C08261] mb-6 border-l-4 border-[#C08261] pl-4">Tr·ª£ L√Ω Du L·ªãch AI</h2><div class="space-y-8"><div><h3 class="text-xl font-semibold mb-2">H·ªèi AI G·ª£i √ù</h3><p class="mb-4 text-gray-600">B·∫°n c√≥ c√¢u h·ªèi n√†o kh√°c kh√¥ng? H√£y h·ªèi tr·ª£ l√Ω AI ƒë·ªÉ c√≥ th√™m g·ª£i √Ω cho chuy·∫øn ƒëi nh√©.</p><div class="flex flex-col sm:flex-row gap-2"><input type="text" id="ai-prompt" placeholder="VD: G·ª£i √Ω 5 qu√°n c√† ph√™ ƒë·∫πp ·ªü Bangkok" class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C08261] focus:border-transparent transition"><button id="ai-submit" class="bg-[#9A8B7A] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#756655] transition-colors duration-300">G·ª≠i c√¢u h·ªèi</button></div><div id="ai-response-container" class="mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50 min-h-[100px]"><p class="text-gray-500">C√¢u tr·∫£ l·ªùi t·ª´ AI s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y...</p></div></div><div><h3 class="text-xl font-semibold mb-2">G·ª£i √ù Nhanh</h3><p class="mb-4 text-gray-600">Ch·ªçn m·ªôt ch·ªß ƒë·ªÅ ƒë·ªÉ nh·∫≠n ngay th√¥ng tin h·ªØu √≠ch t·ª´ AI.</p><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"><button class="quick-prompt-btn bg-white p-4 border border-gray-200 rounded-lg shadow-sm hover:shadow-md hover:border-[#C08261] transition" data-prompt="Li·ªát k√™ 5 m√≥n ƒÉn ƒë∆∞·ªùng ph·ªë n·ªïi ti·∫øng ·ªü Bangkok, Th√°i Lan m√† du kh√°ch n√™n th·ª≠, k√®m theo m√¥ t·∫£ ng·∫Øn g·ªçn cho m·ªói m√≥n.">üçú M√≥n ƒÉn n√™n th·ª≠</button><button class="quick-prompt-btn bg-white p-4 border border-gray-200 rounded-lg shadow-sm hover:shadow-md hover:border-[#C08261] transition" data-prompt="N√™u 5 m·∫πo v·ªÅ vƒÉn ho√° ·ª©ng x·ª≠ quan tr·ªçng cho du kh√°ch khi ƒë·∫øn thƒÉm ch√πa v√† c√°c n∆°i t√¥n nghi√™m ·ªü Th√°i Lan.">üôè M·∫πo vƒÉn ho√°</button><button class="quick-prompt-btn bg-white p-4 border border-gray-200 rounded-lg shadow-sm hover:shadow-md hover:border-[#C08261] transition" data-prompt="Li·ªát k√™ 10 c√¢u giao ti·∫øp ti·∫øng Th√°i c∆° b·∫£n cho du kh√°ch, bao g·ªìm phi√™n √¢m v√† nghƒ©a ti·∫øng Vi·ªát. V√≠ d·ª•: Xin ch√†o, C·∫£m ∆°n, Xin l·ªói.">üó£Ô∏è C√¢u giao ti·∫øp c∆° b·∫£n</button></div></div></div></div>
            </section>
        </main>
    </div>

    <script>
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        const aiSubmitBtn = document.getElementById('ai-submit');
        const aiPromptInput = document.getElementById('ai-prompt');
        const aiResponseContainer = document.getElementById('ai-response-container');
        const quickPromptButtons = document.querySelectorAll('.quick-prompt-btn');
        const customTripForm = document.getElementById('custom-trip-form');
        const customTripResult = document.getElementById('custom-trip-result');

        function showTab(tabId) {
            tabButtons.forEach(button => button.classList.remove('active-tab'));
            tabContents.forEach(content => content.classList.remove('active-content'));
            const button = document.querySelector(`.tab-button[onclick="showTab('${tabId}')"]`);
            const content = document.getElementById(tabId);
            button.classList.add('active-tab');
            content.classList.add('active-content');
        }

        function toggleDetails(dayId) {
            const content = document.getElementById(dayId);
            if (content) content.classList.toggle('open');
        }
        
        function toggleGeneratedDetails(dayId) {
            const content = document.querySelector(`.generated-details[data-day="${dayId}"]`);
            if (content) content.classList.toggle('open');
        }

        async function callGemini(prompt, responseElement, responseType = 'text', schema = null) {
            responseElement.innerHTML = '<div class="flex justify-center items-center p-4"><div class="loader"></div></div>';
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            const payload = { contents: [{ parts: [{ text: prompt }] }] };

            if (responseType === 'json' && schema) {
                payload.generationConfig = {
                    responseMimeType: "application/json",
                    responseSchema: schema
                };
            }

            try {
                let response;
                let backoff = 1000;
                for (let i = 0; i < 5; i++) {
                    response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (response.ok) break;
                    await new Promise(resolve => setTimeout(resolve, backoff));
                    backoff *= 2;
                }
                
                if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
                
                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    const text = candidate.content.parts[0].text;
                    if (responseType === 'json') {
                         return JSON.parse(text);
                    } else {
                        responseElement.innerHTML = `<p class="gemini-response">${text}</p>`;
                    }
                } else {
                    throw new Error("Invalid response structure from API.");
                }
            } catch (error) {
                responseElement.innerHTML = `<p class="text-red-500">ƒê√£ x·∫£y ra l·ªói khi t·∫°o l·ªãch tr√¨nh. Vui l√≤ng th·ª≠ l·∫°i sau.</p>`;
                return null;
            }
        }

        aiSubmitBtn.addEventListener('click', () => {
            const prompt = aiPromptInput.value.trim();
            if (prompt) callGemini(prompt, aiResponseContainer);
        });

        quickPromptButtons.forEach(button => {
            button.addEventListener('click', () => {
                const prompt = button.dataset.prompt;
                if (prompt) {
                    showTab('ai');
                    aiPromptInput.value = '';
                    callGemini(prompt, aiResponseContainer);
                }
            });
        });

        customTripForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const days = document.getElementById('trip-days').value;
            const interests = Array.from(document.querySelectorAll('#trip-interests input:checked')).map(el => el.value).join(', ');
            const budget = document.querySelector('#trip-budget input:checked').value;

            const prompt = `V·ªõi vai tr√≤ l√† m·ªôt chuy√™n gia l·∫≠p k·∫ø ho·∫°ch du l·ªãch, h√£y t·∫°o m·ªôt l·ªãch tr√¨nh chi ti·∫øt cho chuy·∫øn ƒëi ${days} ng√†y t·∫°i Bangkok, Th√°i Lan. Chuy·∫øn ƒëi n√†y d√†nh cho m·ªôt nh√≥m c√≥ ng√¢n s√°ch ${budget} v√† s·ªü th√≠ch ch√≠nh l√†: ${interests || 'kh√°m ph√° chung'}. V·ªõi m·ªói ng√†y, h√£y g·ª£i √Ω c√°c ho·∫°t ƒë·ªông cho bu·ªïi s√°ng, chi·ªÅu, v√† t·ªëi, k√®m theo m√¥ t·∫£ ng·∫Øn g·ªçn v√† h·∫•p d·∫´n.`;
            
            const schema = {
                type: "OBJECT",
                properties: {
                    itinerary: {
                        type: "ARRAY",
                        items: {
                            type: "OBJECT",
                            properties: {
                                day: { type: "STRING" },
                                title: { type: "STRING" },
                                activities: {
                                    type: "ARRAY",
                                    items: {
                                        type: "OBJECT",
                                        properties: {
                                            time: { type: "STRING" },
                                            description: { type: "STRING" }
                                        },
                                        required: ["time", "description"]
                                    }
                                }
                            },
                            required: ["day", "title", "activities"]
                        }
                    }
                },
                required: ["itinerary"]
            };

            const data = await callGemini(prompt, customTripResult, 'json', schema);
            
            if (data && data.itinerary) {
                renderCustomItinerary(data.itinerary);
            }
        });

        function renderCustomItinerary(itinerary) {
            let html = '<h2 class="text-2xl font-bold text-[#C08261] mb-6 border-l-4 border-[#C08261] pl-4">L·ªãch Tr√¨nh G·ª£i √ù D√†nh Cho B·∫°n</h2>';
            html += '<div class="relative space-y-8">';
            itinerary.forEach((dayPlan, index) => {
                const dayId = `gen-day-${index + 1}`;
                html += `
                    <div class="timeline-item pl-12 relative cursor-pointer" onclick="toggleGeneratedDetails('${dayId}')">
                        <div class="icon-bg absolute left-0 top-0 w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg transform -translate-x-1/2">${index + 1}</div>
                        <h3 class="text-xl font-bold">${dayPlan.day}: ${dayPlan.title}</h3>
                        <div class="details-content generated-details" data-day="${dayId}">
                            <ul class="mt-4 space-y-2 text-gray-700 pl-4 border-l-2 border-gray-200">
                                ${dayPlan.activities.map(act => `<li><strong>${act.time}:</strong> ${act.description}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            customTripResult.innerHTML = html;
        }

        const ctx = document.getElementById('budgetChart').getContext('2d');
        const budgetChart = new Chart(ctx, { type: 'doughnut', data: { labels: ['V√© m√°y bay', 'N∆°i ·ªü', 'ƒÇn u·ªëng', 'Di chuy·ªÉn & Tham quan', 'Ph√°t sinh'], datasets: [{ label: 'Ph√¢n b·ªï chi ph√≠', data: [3000, 1500, 2500, 1500, 1000], backgroundColor: ['#E4C59E', '#C08261', '#9A8B7A', '#756655', '#EAE0D5'], borderColor: '#FDFBF8', borderWidth: 4, hoverOffset: 8 }] }, options: { responsive: true, maintainAspectRatio: false, cutout: '60%', plugins: { legend: { display: false }, tooltip: { callbacks: { label: function(context) { let label = context.label || ''; if (label) { label += ': '; } if (context.parsed !== null) { label += new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(context.parsed * 1000); } return label; } } } } } });
    </script>
</body>
</html>

